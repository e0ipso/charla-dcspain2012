<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>¡No todo va en el TPL! | por Mateu Aguiló y Moisés Rodríguez</title>
    
    <meta name="description" content="Presentación para la charcha de la Drupalcamp 2012 de Madrid. @e0ipso &amp; @vengador" />
    
    <meta name="author" content="Moisés Rodríguez Carmona" />
    <meta name="author" content="Mateu Aguiló Bosch" />

    <link href="http://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|PT+Sans:400,700,400italic,700italic|PT+Serif:400,700,400italic,700italic" rel="stylesheet" />

    <link href="css/impress.css" rel="stylesheet" />

    <!-- Our own styles for slides-->
    <link href="css/slides.css" rel="stylesheet" />
     <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Capriola|Lobster" />
  
    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />

    <link rel="stylesheet" href="js/highlight/styles/tomorrow-night-bright.css">
    <script src="js/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body class="impress-not-supported">

<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>

<!--
    To change the duration of the transition between slides use `data-transition-duration="2000"` giving it
    a number of ms. It defaults to 1000 (1s).
    
    You can also control the perspective with `data-perspective="500"` giving it a number of pixels.
    It defaults to 1000. You can set it to 0 if you don't want any 3D effects.
    If you are willing to change this value make sure you understand how CSS perspective works:
    https://developer.mozilla.org/en/CSS/perspective
-->

<div id="impress">
    <div id="presenta" class="step" data-x="0" data-y="0" data-z="0" data-scale="200">
      <h2>¡No todo va en el TPL!</h2>
      <div class="author separator">
        <h3 class="name">Moises Rodriguez Carmona</h3>
        <p class="position">Brown cleaner</p>
        <p class="twitter">@vengador</p>
        <p class="position">Crononauta</p>
      </div>
      <div class="author">
        <h3 class="name">Mateu Aguilo Bosch</h3>
        <p class="position">Drupal Evangelist</p>
        <p class="twitter">@e0ipso</p>
        <p class="position">Crononauta</p>
      </div>
    </div>
    <div id="crono" class="step" data-x="-60000" data-y="-20000" data-z="0" data-scale="4">
      <h2>Crononauta</h2>
      <div class="logo"><a href="http://www.twitter.com/crononito" title="Twitter">@crononito</a></div>
      <p>Somos un <strong>equipo</strong> de desarrolladores web y administradores de sistemas con amplia experiencia. Ofrecemos <strong>servicios</strong> de definición y gestión de proyectos, desarrollo a medida y administración de sistemas.</p>
      <p>Estamos especializados en <strong>PHP</strong>, <strong>Drupal</strong> y <strong>Ruby On Rails</strong>. Estudiamos cómo aprovechar aún más la tecnología conocida (MySQL, <strong>Varnish</strong>) y aplicamos con éxito tecnologías más recientes (MongoDB, memcached, APC). Tenemos amplia experiencia en distintas infraestructuras de sistemas (Linode, Amazon, CDNs).</p>
      <div class="crononauta-web"><a href="http://www.crononauta.com" title="Web Crononauta">http://crononauta.com</a></div>
    </div>

    <div id="projects" class="step" data-x="-55000" data-y="-20000" data-scale="4">
      <h2 class="projects">Proyectos</h2>
      <ul class="projects-parts">
        <li class="separator">Frontend</li>
        <li>Backend</li>
      </ul>
      <ul class="drupal-parts">
        <li class="separator">Theme</li>
        <li>Modules</li>
      </ul>
      <h2 class="drupal">Drupal</h2>
    </div>
    <div id="theme" class="step circle" data-x="-55000" data-y="-16000" data-scale="4">
      <h2>Temas en Drupal</h2>
      <h3>¿Qué es un tema?</h3>
      <p class="definition">Un conjunto de ficheros que nos van a permitir cambiar el aspecto del sitio Drupal.</p>
      <p>En drupal.org tenemos muchos temas (+ 1025).</p>
      <iframe class="lots-of-themes" src="https://drupal.org/project/themes#project-solr-browse-projects-form"></iframe>
      <p><em>live</em></p>
    </div>
    <div id="veamos" class="step" data-x="-50000" data-y="-16000" data-scale="4">
      <h2>Veamos…</h2>
    </div>

    <div id="theme-structure" class="step slide" data-x="-50000" data-y="-16000" data-rotate-x="90">
      <h2>Estructura de ficheros del tema</h2>
      <div class="structure"></div>
    </div>
    <div id="base-child-theme" class="step" data-x="-49000" data-y="-16000" data-z="400" data-rotate-x="90" data-rotate="30">
      <h2>Temas padres e hijos</h2>
      <p class="definition">En Drupal está permitido crear un tema a partir de otro.</p>
      <div class="inherited">
        <p>Hereda del padre:</p>
        <ul>
          <li>Ficheros CSS</li>
          <li>Ficheros Javascript</li>
          <li>template.php</li>
          <li>Ficheros tpl</li>
          <li>Captura de pantalla</li>
        </ul>
      </div>
      <div class="not-inherited">
        <p>No se hereda:</p>
        <ul>
          <li>Logo</li>
          <li>Favicon</li>
          <li>Regiones añadidas</li>
          <li>Características añadidas</li>
        </ul>
      </div>
      <ul class="themes">
        <li class="fusion">Fusion</li>
        <li class="zen">Zen</li>
        <li class="omega">Omega</li>
        <li class="adaptative">Adaptative Theme</li>
      </ul>
    </div>
    <div id="info-file" class="slide step" data-x="-48300" data-y="-16000" data-z="1260" data-rotate-x="90" data-rotate="60">
      <h2>Fichero .info</h2>
      <pre><code>
name = Spongebob Theme
description = A fully featured theme for fondo-bikini.es
base theme = fusion_core
core = 7.x
engine = phptemplate

stylesheets[all][] = css/style.css

scripts[] = js/scripts.js

; --------------------------------------------------------------------------------
; Regions.
; --------------------------------------------------------------------------------
regions[sidebar_first] = Sidebar first
regions[sidebar_second] = Sidebar second
regions[header_top] = Header top
regions[header] = Header
regions[main_menu] = Main menu
regions[content] = Content
regions[footer] = Footer
regions[page_top] = Page top
regions[page_bottom] = Page bottom

; --------------------------------------------------------------------------------
; Define features supported by this theme.
; --------------------------------------------------------------------------------
features[] = logo
features[] = name
features[] = slogan
features[] = favicon

; --------------------------------------------------------------------------------
; Default theme settings.
; --------------------------------------------------------------------------------
settings[theme_grid] = grid12-960
...
      </code></pre>
      <div class="documentation"><a href="http://drupal.org/node/171205" title="Writing theme .info files">Documentación</a></div>
    </div>

   <div id="template-php" class="step circle" data-x="-48300" data-y="-16000" data-z="2500" data-rotate-x="90" data-rotate="90">
      <h2>template.php</h2>
      <p>El archivo template.php define una serie de funciones que se encargan de procesar y dejar disponibles una serie de variables para su uso en las plantillas.</p>
    </div>
  <div id="section-2" class="step overview" data-x="0" data-y="0" data-z="0" data-scale="200"></div>

    <div id="basic-tpls" class="step slide" data-x="3500" data-y="-1500" data-z="-500" data-rotate-y="90">
      <h2>Plantillas basicas en un tema</h2>
      <div class="schema"></div>
    </div>

    <div id="in-tpl" class="step slide" data-x="500" data-y="-1500" data-z="-500" data-rotate-y="90">
      <h2>¿Que <strong>deberia</strong> ir en un TPL?</h2>
      <p>Poca cosa:</p>
      <ul>
        <li>HTML</li>
        <li>PHP: ¡Muy poco!</li>
      </ul>
    </div>
    
    <div id="teaser-example-1" class="step" data-x="500" data-y="-1500" data-rotate-y="90" data-z="-500" data-scale="0.04">
        <p>Básicamente sólo debería ir aquí:</p>
        <p><code>if</code>, <code>print</code>, <code>render</code>, <code>isset</code>, <code>empty</code>…</p>
        <pre><code>&lt;article&lt;?php print $attributes; ?&gt;&gt;
&lt;div class=&quot;pre-content clearfix&quot;&gt;
  &lt;header class=&quot;grid-4 prefix-1&quot;&gt;
    &lt;div class=&quot;patrick-friend&quot;&gt;
      &lt;?php print $field_square; ?&gt;
    &lt;/div&gt;
    &lt;div class=&quot;header-container&quot;&gt;
      &lt;div class=&quot;image-wrapper-krusty-krab&quot;&gt;
        &lt;?php
          print render($content[&#x27;field_pants&#x27;]);
        ?&gt;
      &lt;/div&gt;
      …</code></pre>
    </div>
    <div id="teaser-example-2" class="step" data-x="500" data-y="-1500" data-rotate-y="90" data-z="-550" data-scale="0.04">
        <pre><code>
        print render($content[&#x27;field_pants&#x27;]);
      ?&gt;
    &lt;/div&gt;
    …
    &lt;?php print render($title_prefix); ?&gt;
    &lt;h2&lt;?php print $title_attributes; ?&gt;&gt;
      &lt;a href=&quot;&lt;?php print $node_url ?&gt;&quot;
         title=&quot;&lt;?php print $title ?&gt;&quot;&gt;
         &lt;?php print $title ?&gt;&lt;/a&gt;&lt;/h2&gt;
    &lt;?php print render($title_suffix); ?&gt;
  &lt;/div&gt;
&lt;/header&gt;
  …</code></pre>
    </div>
    <div id="teaser-example-3" class="step" data-x="500" data-y="-1500" data-rotate-y="90" data-z="-600" data-scale="0.04">
        <pre><code>
  …
  &lt;nav class=&quot;links-wrapper&quot;&gt;
    &lt;?php print render($content[&#x27;links&#x27;]); ?&gt;
  &lt;/nav&gt;&lt;/div&gt;
  &lt;div&lt;?php print $squidward_attributes; ?&gt;&gt;
      &lt;?php if ($display_submitted): ?&gt;
      &lt;footer class=&quot;submitted&quot;&gt;
        &lt;?php print $name; ?&gt;&lt;/footer&gt;
    &lt;/div&gt;
    &lt;?php
      hide($content[&#x27;field_pinapple&#x27;]);
      hide($content[&#x27;field_square_pants&#x27;]);
      print render($content);
    ?&gt;
  &lt;/div&gt;
  &lt;p&gt;&lt;?php
    print render($content[&#x27;field_pinapple&#x27;]);
  ?&gt;&lt;/p&gt;
&lt;/article&gt;</code></pre>
    </div>
    
    <div id="prep" class="step circle" data-x="500" data-y="-1500" data-z="-1500" data-rotate-y="90">
        <h2>¿De donde saco esas <strong>variables</strong>?</h2>
        <p>Cálculo de datos necesarios:</p>
        <ul>
          <li>Módulo</li>
          <li>Función de preprocesado</li>
        </ul>
        <p>Renderizados finales:</p>
        <ul>
          <li>Funciones de procesado</li>
        </ul>
        <p class="note">Es típico que haya muchas implementaciones de preprocesado que se convierten en HTML al final en el procesado.</p>
    </div>
    
  <div id="what-i" class="step slide" data-x="500" data-y="-1500" data-z="-2500" data-rotate-y="90">
    <h2>Whaaaaaat?! (I/II)</h2>
    <pre><code>function mytheme_preprocess_node(&$variables) {
  // Añadimos clases para el nodo
  $classes_array[] = 'sponge';
}</code></pre>
    <p class="note">En nuestro <code>template.php</code> implementamos función de procesado para poder añadir una clase.</p>
  </div>

  <div id="what-ii" class="step slide" data-x="400" data-y="-1500" data-z="-2500" data-rotate-y="-90">
    <h2>Whaaaaaat?! (II/II)</h2>
    <pre><code>function node_process_node(&$variables) {
  // […]
  $classes = implode(' ', $classes_array);
}</code></pre>
    <p class="note">El módulo node recoge todas las clases en el array y genera el string que insertaremos en el TPL.</p>
  </div>
  
  <div id="recap" class="slide step" data-x="400" data-y="-1500" data-z="-1500" data-rotate-y="-90">
    <h2>Recapitulando</h2>
    <ol>
      <li>Los módulos calculan/recuperan/generan datos.</li>
      <li>Los themers los recogen y los preparan en el (pre)procesado.</li>
      <li>En el TPL se insertan los datos rodeados de HTML.</li>
    </ol>
  </div>
  <div id="section-3" class="step overview" data-x="50000" data-y="0" data-z="0" data-scale="200"></div>

  <div id="error-cases" class="slide step" data-x="230000" data-y="0" data-z="-1500" data-scale="100">
    <h2>Casos de <span class="line-through">horror</span> error!</h2>
    <ol>
      <li>El <strong>preprocess_block</strong> maldito</li>
      <li>El caso de los <strong>datos fantasma</strong>.</li>
    </ol>
  </div>
 
  <div id="bonus-i" class="step slide" data-x="297500" data-y="-17500" data-z="-1500" data-scale="50">
    <h2>¡Bonus!</h2>
    <p>Pedimos disculpas por los mareos ocasionados.</p>
  </div>

  <div id="bonus-ii" class="step slide" data-x="297500" data-y="17500" data-z="-1500" data-scale="50">
    <h2>Modulos que nos facilitan la vida a los themers</h2>
    <ul>
      <li>Display Suite</li>
      <li>Skinr - Fusion Accelerator</li>
    </ul>
  </div>

  <div id="ds-i" class="step slide" data-x="331250" data-y="8750" data-z="-1500" data-scale="25">
    <h2>Display Suite</h2>
    <p>Control completo sobre:</p>
    <ul>
      <li><strong>Formulario</strong> creación/edición contenido.</li>
      <li>Modos de <strong>visualización</strong>.</li>
    </ul>
  </div>

  <div id="ds-ii" class="step slide" data-x="331250" data-y="26250" data-z="-1500" data-scale="25">
    <h2><span class="left">Display Suite</span><span class="right">Modos de visualizacion</span></h2>
    <div class="image">
      <img src="images/display_suite_modos.png" alt="Modos de visualización" width="969" height="448" />
    </div>
    <p>Disponibles en views.</p>
  </div>
  <div id="ds-iii" class="step" data-x="325100" data-y="38030" data-z="-1500" data-scale="12.5">
    <h2><span class="top">Display Suite</span><span class="bottom">Disenos</span></h2>
    <div class="image">
      <img src="images/display_suite_diseno.png" alt="Diseños display suite" width="961" height="593" />
    </div>
  </div>

  <div id="ds-iv" class="step" data-x="335380" data-y="37500" data-z="-1500" data-scale="12.5">
    <h2><span class="top">Display Suite</span><span class="bottom">Interfaz</span></h2>
    <div class="image">
      <img src="images/display_suite_interfaz.png" alt="Interfaz Display Suite" width="819" height="423" />
    </div>
  </div>

  <div id="ds-v" class="step" data-x="355650" data-y="37500" data-z="-1500" data-scale="12.5">
    <h2><span class="left">Display Suite</span><span class="right">Resultados</span></h2>
    <div class="image">
      <img src="images/display_suite_visualizacion.png" alt="Visualización Display Suite" width="511" height="600" />
    </div>
  </div>

  <div id="skinr-i" class="step slide" data-x="355650" data-y="37500" data-z="-10000" data-rotate-y="90" data-scale="12.5">
    <h2>Skinr - Fusion Accelerator</h2>
    <p>Permiten definir un conjunto de estilos CSS reusables y que pueden ser aplicados mediante interfaz.</p>
    <ul>
      <li>Skinr (Drupal 6 y 7) http://drupal.org/project/skinr</li>
      <li>Fusion Accelerator (Drupal 7) http://drupal.org/project/fusion_accelerator</li>
    </ul>
  </div>

  <div id="the-end" class="step slide" data-x="355650" data-y="37500" data-z="-24000" data-rotate-y="90" data-scale="12.5">
    <h2>¡No todo va en el TPL!</h2>
    <p class="questions">¿Preguntas?</p>
  </div>

  <div id="thanks" class="step circle" data-x="355650" data-y="37500" data-z="-38000" data-rotate-y="90" data-scale="12.5">
    <h2>¡No todo va en el TPL!</h2>
    <p class="thank-you">Gracias :)</p>

    <div class="author separator">
      <h3 class="name">Mateu Aguiló Bosch</h3>
      <p class="position">Drupal Evangelist</p>
      <p class="twitter">@e0ipso</p>
    </div>
    <div class="author">
      <h3 class="name">Moisés Rodríguez Carmona</h3>
      <p class="position">Brown cleaner</p>
      <p class="twitter">@vengador</p>
    </div>
  </div>

  <div id="overview" class="step slide overview" data-x="0" data-y="0" data-z="0" data-scale="200" data-rotate-y="-45" data-rotate-x="15">

</div>

<!--
<div class="hint">
    <p>Use a spacebar or arrow keys to navigate</p>
</div>
-->

<script>
if ("ontouchstart" in document.documentElement) { 
    document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
}
</script>

<script src="js/impress.js"></script>
<script>
  impress().init();
</script>

</body>
</html>
